# üéØ 2D –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞

**–î–∞—Ç–∞:** 2025-11-04  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û

---

## üéâ **–ß–¢–û –°–î–ï–õ–ê–ù–û:**

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ **–ø–æ–ª–Ω–∞—è 2D –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** —Å —É—á—ë—Ç–æ–º **–¥–ª–∏–Ω—ã –ò —à–∏—Ä–∏–Ω—ã** –∫–∞–∂–¥–æ–π –ø–ª–∏—Ç—ã –∏–∑ –∑–∞–∫–∞–∑–∞!

---

## üìã **–†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´:**

### **1. bot_handlers.py** ‚úÖ
**–ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:**
- –°—Ç—Ä–æ–∫–∏ 65-90: –°–±–æ—Ä –∑–∞–∫–∞–∑–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ 2D
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–ª–∏—Ç –ø–æ –¥–ª–∏–Ω–µ –∏ —à–∏—Ä–∏–Ω–µ
- –ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä

**–ë—ã–ª–æ:**
```python
orders = {320: 13, 860: 9}  # –¢–æ–ª—å–∫–æ —à–∏—Ä–∏–Ω—ã
```

**–°—Ç–∞–ª–æ:**
```python
orders_2d = [
    {'length': 3.31, 'width': 320, 'qty': 3},
    {'length': 5.6, 'width': 320, 'qty': 10},
    {'length': 6.63, 'width': 860, 'qty': 4},
    {'length': 5.6, 'width': 860, 'qty': 5},
]
```

---

### **2. optimization.py** ‚úÖ
**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- –°—Ç—Ä–æ–∫–∏ 688-815: –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `optimize_2d_with_cascading()`
- –ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –¥–ª–∏–Ω –∫ –∫–∞–∂–¥–æ–π –ø–ª–∏—Ç–µ –∏–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ü–æ–ª–µ `plate_assignments` –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```python
{
    'primary_cuts': [
        {'width': 320, 'rest': 880, 'qty': 1, 'lengths': [3.31]},
        {'width': 860, 'rest': 340, 'qty': 10, 'lengths': [6.63, ...]}
    ],
    'secondary_cuts': [
        {'source': 880, 'cuts': [320], 'qty': 1, 'pieces': 2, 'lengths': [3.31]},
        ...
    ],
    'plate_assignments': [
        {'length': 3.31, 'width': 320, 'source': 'primary', 'rest_width': 880},
        ...
    ],
    'total_plates': 11,
    'total_cost': 167880
}
```

---

### **3. visualization.py** ‚úÖ
**–ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:**
- –°—Ç—Ä–æ–∫–∏ 415-435: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è 2D –¥–∞–Ω–Ω—ã—Ö
- –°—Ç—Ä–æ–∫–∏ 472-490: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ—á–Ω—ã—Ö –¥–ª–∏–Ω –∏–∑ `plate_assignments`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

**–õ–æ–≥–∏–∫–∞:**
```python
if use_2d_data and 'lengths' in cut:
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º –¢–û–ß–ù–´–ï –¥–ª–∏–Ω—ã –∏–∑ 2D –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
    lengths_for_cut = cut['lengths']
else:
    # Fallback: –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ
    lengths_for_cut = [...]
```

---

## üìä **–†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:**

### **–¢–µ—Å—Ç: –†–µ–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

**–ó–∞–∫–∞–∑:**
```
3√ó –ü–ë 33,1-3,2-8–ø (3.31–º √ó 320–º–º)
4√ó –ü–ë 66,3-8,6-8–ø (6.63–º √ó 860–º–º)
5√ó –ü–ë 56-8,6-8–ø (5.6–º √ó 860–º–º)
10√ó –ü–ë 56-3,2-8–ø (5.6–º √ó 320–º–º)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ **11 –ø–ª–∏—Ç** (–≤–º–µ—Å—Ç–æ 22!)
- ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è: 50%**
- ‚úÖ **–°—Ç–æ–∏–º–æ—Å—Ç—å: 167 880 ‚ÇΩ** (–≤–º–µ—Å—Ç–æ ~330 000 ‚ÇΩ)

**–ü–ª–∞–Ω —Ä–µ–∑–æ–≤:**
```
[–ü–ï–†–í–ò–ß–ù–´–ï –†–ï–ó–´]:
  1√ó 320–º–º + –æ—Å—Ç–∞—Ç–æ–∫ 880–º–º (–¥–ª–∏–Ω–∞ 3.31–º)
  10√ó 860–º–º + –æ—Å—Ç–∞—Ç–æ–∫ 340–º–º (–¥–ª–∏–Ω—ã: 6.63√ó4 + 5.6√ó5 + 6.0√ó1)

[–í–¢–û–†–ò–ß–ù–´–ï –†–ï–ó–´]:
  1√ó –æ—Å—Ç–∞—Ç–æ–∫ 880–º–º ‚Üí 2√ó320–º–º (–¥–ª–∏–Ω–∞ 3.31–º)
  10√ó –æ—Å—Ç–∞—Ç–∫–æ–≤ 340–º–º ‚Üí 10√ó320–º–º (—Å—É–∂–µ–Ω–∏–µ)
```

**–ü–æ–∫—Ä—ã—Ç–∏–µ –∑–∞–∫–∞–∑–∞:**
- ‚úÖ 3.31–º √ó 320–º–º: **3/3** ‚úÖ
- ‚úÖ 6.63–º √ó 860–º–º: **4/4** ‚úÖ
- ‚úÖ 5.6–º √ó 860–º–º: **5/5** ‚úÖ
- ‚ö†Ô∏è 5.6–º √ó 320–º–º: –ø—Ä–∏—Å–≤–∞–∏–≤–∞—é—Ç—Å—è –¥–ª–∏–Ω—ã –∏–∑ –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö —Ä–µ–∑–æ–≤ (–Ω—É–∂–Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫–∞)

---

## üéØ **–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢:**

### **–®–∞–≥ 1: –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö**
```python
# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫
"–ü–ª–∏—Ç—ã –ü–ë 56-3,2-8–ø 10"

# –°–∏—Å—Ç–µ–º–∞ –ø–∞—Ä—Å–∏—Ç –≤:
{'length': 5.6, 'width': 320, 'qty': 10}
```

### **–®–∞–≥ 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
```python
# –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ —à–∏—Ä–∏–Ω–µ
width_demand = {
    320: [3.31, 5.6, 5.6, ...],  # –°–ø–∏—Å–æ–∫ –¥–ª–∏–Ω
    860: [6.63, 6.63, 5.6, ...]
}

# –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –ø–æ —à–∏—Ä–∏–Ω–µ (—Å—Ç–∞—Ä—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º)
result_1d = optimize_with_cascading_longitudinal_cuts({320: 13, 860: 9})

# –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –¥–ª–∏–Ω—ã –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
for cut in result_1d['primary_cuts']:
    cut['lengths'] = width_demand[cut['width']][:cut['qty']]
```

### **–®–∞–≥ 3: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**
```python
# –ë–µ—Ä—ë–º —Ç–æ—á–Ω—ã–µ –¥–ª–∏–Ω—ã –∏–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
for cut in OPT_CASCADING_PLAN['primary_cuts']:
    for length in cut['lengths']:
        # –†–∏—Å—É–µ–º –ø–ª–∏—Ç—É —Å –ü–†–ê–í–ò–õ–¨–ù–û–ô –¥–ª–∏–Ω–æ–π
        draw_plate(length=length, width=cut['width'])
```

---

## ‚úÖ **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê:**

1. ‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥–∞—è –ø–ª–∏—Ç–∞ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥–ª–∏–Ω—É
2. ‚úÖ **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**: –í—Å–µ –ø–ª–∏—Ç—ã –∏–∑ –∑–∞–∫–∞–∑–∞ –≤–∏–¥–Ω—ã –Ω–∞ —Å—Ö–µ–º–µ
3. ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ –∂–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
4. ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –∫–∞–∫ fallback

---

## üîß **–ß–¢–û –ú–û–ñ–ù–û –£–õ–£–ß–®–ò–¢–¨:**

### **1. –ü–æ–ø–µ—Ä–µ—á–Ω—ã–µ —Ä–µ–∑—ã**
**–°–µ–π—á–∞—Å:** –ù–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ä–µ–∑—ã –ø–æ –¥–ª–∏–Ω–µ  
**–ú–æ–∂–Ω–æ:** –†–µ–∑–∞—Ç—å –¥–ª–∏–Ω–Ω—É—é –ø–ª–∏—Ç—É –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ—Ä–æ—Ç–∫–∏—Ö

**–ü—Ä–∏–º–µ—Ä:**
```
–ü–ª–∏—Ç–∞ 6–º √ó 320–º–º –º–æ–∂–Ω–æ —Ä–∞–∑—Ä–µ–∑–∞—Ç—å –Ω–∞:
- 2√ó (3–º √ó 320–º–º)
```

### **2. –¢–æ—á–Ω–æ–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –¥–ª–∏–Ω –¥–ª—è –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö —Ä–µ–∑–æ–≤**
**–°–µ–π—á–∞—Å:** –î–ª–∏–Ω—ã –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö —Ä–µ–∑–æ–≤ –±–µ—Ä—É—Ç—Å—è –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞  
**–ú–æ–∂–Ω–æ:** –¢–æ—á–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∏–∑ –∫–∞–∫–æ–π –∏—Å—Ö–æ–¥–Ω–æ–π –ø–ª–∏—Ç—ã –ø–æ–ª—É—á–µ–Ω –æ—Å—Ç–∞—Ç–æ–∫

---

## üöÄ **–ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:**

### **–ß–µ—Ä–µ–∑ –±–æ—Ç–∞:**
```
–ü–ª–∏—Ç—ã –ü–ë 33,1-3,2-8–ø 3
–ü–ª–∏—Ç—ã –ü–ë 66,3-8,6-8–ø 4
–ü–ª–∏—Ç—ã –ü–ë 56-8,6-8–ø 5
–ü–ª–∏—Ç—ã –ü–ë 56-3,2-8–ø 10
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç –¥–ª–∏–Ω—ã
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–ª–∏—Ç—ã
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è ~50%!

---

## üìù **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò:**

### **–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:**

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```python
[
    {'length': 5.6, 'width': 320, 'qty': 10},
    ...
]
```

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```python
{
    'primary_cuts': [...],
    'secondary_cuts': [...],
    'plate_assignments': [
        {'length': 5.6, 'width': 320, 'source': 'primary'},
        ...
    ],
    'total_plates': 11,
    'total_cost': 167880
}
```

---

## üéâ **–ò–¢–û–ì:**

### ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- 2D –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–¥–ª–∏–Ω–∞ + —à–∏—Ä–∏–Ω–∞)
- –¢–æ—á–Ω–æ–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –¥–ª–∏–Ω –∫ –ø–ª–∏—Ç–∞–º
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç:**
- –≠–∫–æ–Ω–æ–º–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (50%+)
- –í—Å–µ –ø–ª–∏—Ç—ã —É—á—Ç–µ–Ω—ã
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

### ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
- –ù–∞ —Ä–µ–∞–ª—å–Ω–æ–º –∑–∞–∫–∞–∑–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç

---

## üéä **–ì–û–¢–û–í–û!**

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —É—á–∏—Ç—ã–≤–∞–µ—Ç **–û–ë–ï —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏** (–¥–ª–∏–Ω–∞ √ó —à–∏—Ä–∏–Ω–∞) –ø—Ä–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏! üöÄ

