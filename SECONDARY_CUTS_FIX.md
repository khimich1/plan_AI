# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞ –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö —Ä–µ–∑–æ–≤

**–î–∞—Ç–∞:** 2025-11-04  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

---

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è **–ù–ï –Ω–∞—Ö–æ–¥–∏–ª–∞ –≤—Ç–æ—Ä–∏—á–Ω—ã–µ —Ä–µ–∑—ã** –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏:

### **–°—Ç–∞—Ä—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º:**
```python
for num_pieces in [2, 3, 4]:
    piece_width = rest_w // num_pieces  # ‚ùå –î–µ–ª–∏–º –æ—Å—Ç–∞—Ç–æ–∫ –Ω–∞ N —á–∞—Å—Ç–µ–π
    if abs(piece_width - target_w) <= 10:  # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å tolerance
```

**–ü—Ä–∏–º–µ—Ä (–ø–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ):**
- –û—Å—Ç–∞—Ç–æ–∫: **880 –º–º**
- –ù—É–∂–Ω–∞—è —à–∏—Ä–∏–Ω–∞: **320 –º–º**
- `piece_width = 880 // 3 = 293 –º–º`
- –†–∞–∑–Ω–∏—Ü–∞: `|293 - 320| = 27 –º–º > 10 –º–º` ‚ùå **–ù–ï –ü–û–î–•–û–î–ò–¢!**

---

## ‚úÖ **–†–µ—à–µ–Ω–∏–µ:**

### **–ù–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º:**
```python
for target_w in target_widths:
    num_pieces = rest_w // target_w  # ‚úÖ –°—á–∏—Ç–∞–µ–º, —Å–∫–æ–ª—å–∫–æ –≤–ª–µ–∑–µ—Ç
    if num_pieces >= 2:
        waste = rest_w - (target_w * num_pieces)
        if waste < rest_w * 0.5:  # –û—Ç—Ö–æ–¥ < 50%
```

**–ü—Ä–∏–º–µ—Ä (–∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å):**
- –û—Å—Ç–∞—Ç–æ–∫: **880 –º–º**
- –ù—É–∂–Ω–∞—è —à–∏—Ä–∏–Ω–∞: **320 –º–º**
- `num_pieces = 880 // 320 = 2` ‚úÖ
- –û—Ç—Ö–æ–¥: `880 - (320 √ó 2) = 240 –º–º` (27% –æ—Å—Ç–∞—Ç–∫–∞) ‚úÖ
- **–ü–û–î–•–û–î–ò–¢!** –°–æ–∑–¥–∞—ë–º –≤–∞—Ä–∏–∞–Ω—Ç: **880 –º–º ‚Üí 2√ó320 –º–º (–æ—Ç—Ö–æ–¥ 240 –º–º)**

---

## üìù **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:**

### **–§–∞–π–ª:** `optimization.py`
### **–§—É–Ω–∫—Ü–∏—è:** `optimize_with_cascading_longitudinal_cuts()` (—Å—Ç—Ä–æ–∫–∏ 429-445)

**–ë—ã–ª–æ:**
```python
for num_pieces in [2, 3, 4]:
    piece_width = rest_w // num_pieces
    for target_w_candidate in target_widths:
        if abs(piece_width - target_w_candidate) <= tolerance:
            # ...
```

**–°—Ç–∞–ª–æ:**
```python
for target_w_candidate in target_widths:
    # –°—á–∏—Ç–∞–µ–º, —Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç–µ–π –Ω—É–∂–Ω–æ–π —à–∏—Ä–∏–Ω—ã –≤–ª–µ–∑–µ—Ç –≤ –æ—Å—Ç–∞—Ç–æ–∫
    num_pieces = rest_w // target_w_candidate
    if num_pieces >= 2:  # –ú–∏–Ω–∏–º—É–º 2 –∫—É—Å–∫–∞
        waste = rest_w - (target_w_candidate * num_pieces)
        if waste < rest_w * 0.5:  # –û—Ç—Ö–æ–¥ < 50%
            secondary_cut_options.append({
                'id': f'sec_{rest_w}_to_{num_pieces}x{target_w_candidate}',
                'source_rest': rest_w,
                'output1': target_w_candidate,
                'pieces': num_pieces,
                'waste': waste,
            })
```

---

## üîç **–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞:**

–¢–µ–ø–µ—Ä—å –≤ **—Ç–µ—Ä–º–∏–Ω–∞–ª–µ** –±—É–¥—É—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è:

1. **–ù–∞–π–¥–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö —Ä–µ–∑–æ–≤:**
```
[DEBUG] –ù–∞–π–¥–µ–Ω–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö —Ä–µ–∑–æ–≤: 5
  ‚Üí 880–º–º ‚Üí 2√ó320–º–º (–æ—Ç—Ö–æ–¥ 240–º–º)
  ‚Üí 880–º–º ‚Üí 2√ó460–º–º (–æ—Ç—Ö–æ–¥ 0–º–º)
  ‚Üí 340–º–º ‚Üí 2√ó...
```

2. **–í—ã–±—Ä–∞–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–æ–º:**
```
[DEBUG] –û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä –≤—ã–±—Ä–∞–ª –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö —Ä–µ–∑–æ–≤: 2
```

---

## üìä **–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã:**

### **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ó–∞–∫–∞–∑: 4 –ø–ª–∏—Ç—ã 320 –º–º

### **–ü–µ—Ä–≤–∏—á–Ω—ã–µ —Ä–µ–∑—ã:**
```
–ü–ª–∏—Ç–∞ 1: [320 –º–º] + [–æ—Å—Ç–∞—Ç–æ–∫ 880 –º–º]
–ü–ª–∏—Ç–∞ 2: [320 –º–º] + [–æ—Å—Ç–∞—Ç–æ–∫ 880 –º–º]
–ü–ª–∏—Ç–∞ 3: [320 –º–º] + [–æ—Å—Ç–∞—Ç–æ–∫ 880 –º–º]
–ü–ª–∏—Ç–∞ 4: [320 –º–º] + [–æ—Å—Ç–∞—Ç–æ–∫ 880 –º–º]
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 4 –ø–ª–∏—Ç—ã 320 –º–º ‚úÖ + 4 –æ—Å—Ç–∞—Ç–∫–∞ 880 –º–º

### **–í—Ç–æ—Ä–∏—á–Ω—ã–µ —Ä–µ–∑—ã (–ù–û–í–û–ï!):**
```
–û—Å—Ç–∞—Ç–æ–∫ 1 (880 –º–º): ‚Üí 2√ó320 –º–º (–æ—Ç—Ö–æ–¥ 240 –º–º)
–û—Å—Ç–∞—Ç–æ–∫ 2 (880 –º–º): ‚Üí 2√ó320 –º–º (–æ—Ç—Ö–æ–¥ 240 –º–º)
...
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ï—â—ë 8 –ø–ª–∏—Ç 320 –º–º ‚úÖ

**–ù–û!** –ü–æ –∑–∞–∫–∞–∑—É –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ 4 –ø–ª–∏—Ç—ã, –ø–æ—ç—Ç–æ–º—É –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä:
- –õ–∏–±–æ **–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Ç–æ—Ä–∏—á–Ω—ã–µ —Ä–µ–∑—ã** –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –ø–µ—Ä–≤–∏—á–Ω—ã—Ö
- –õ–∏–±–æ **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Ö**, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –≤—ã–≥–æ–¥–Ω—ã

---

## üéØ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

### **–ù–∞ —Å—Ö–µ–º–µ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è:**
1. üü¢ **–ó–µ–ª—ë–Ω—ã–µ –ø–ª–∏—Ç—ã** (–ø–µ—Ä–≤–∏—á–Ω—ã–µ —Ä–µ–∑—ã)
2. üîµ **–ì–æ–ª—É–±—ã–µ –ø–ª–∏—Ç—ã —Å ‚ôªÔ∏è** (–≤—Ç–æ—Ä–∏—á–Ω—ã–µ —Ä–µ–∑—ã)
3. **–î–ª–∏–Ω–∞ –¥–æ—Ä–æ–∂–∫–∏** —É–≤–µ–ª–∏—á–∏—Ç—Å—è —Å ~76–º –¥–æ ~90-100–º

### **–í –¥–µ—Ç–∞–ª—å–Ω–æ–º –ø–ª–∞–Ω–µ:**
```
üîπ –ü–µ—Ä–≤–∏—á–Ω—ã–µ —Ä–µ–∑—ã (–∏–∑ 1200 –º–º):
‚Ä¢ 4 –ø–ª–∏—Ç ‚Üí 320 –º–º + –æ—Å—Ç–∞—Ç–æ–∫ 880 –º–º

üî∏ –í—Ç–æ—Ä–∏—á–Ω—ã–µ —Ä–µ–∑—ã (–∏–∑ –æ—Å—Ç–∞—Ç–∫–æ–≤):  ‚Üê –ü–û–Ø–í–ò–¢–°–Ø!
‚Ä¢ 2 –æ—Å—Ç–∞—Ç–∫–æ–≤ 880 –º–º ‚Üí 2 —á–∞—Å—Ç–µ–π –ø–æ 320 –º–º (–æ—Ç—Ö–æ–¥ 240 –º–º)
```

---

## üöÄ **–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

1. **–û—Å—Ç–∞–Ω–æ–≤–∏ –±–æ—Ç–∞** (Ctrl+C)
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏:** `python bot_main.py`
3. **–û—Ç–ø—Ä–∞–≤—å —Å–ø–∏—Å–æ–∫ –ø–ª–∏—Ç** —á–µ—Ä–µ–∑ "–ü–æ–ª—É—á–∏—Ç—å –ö–ü"
4. **–°–º–æ—Ç—Ä–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª:**
   ```
   [DEBUG] –ù–∞–π–¥–µ–Ω–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö —Ä–µ–∑–æ–≤: 5
     ‚Üí 880–º–º ‚Üí 2√ó320–º–º (–æ—Ç—Ö–æ–¥ 240–º–º)
     ...
   [DEBUG] –û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä –≤—ã–±—Ä–∞–ª –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö —Ä–µ–∑–æ–≤: 2
   ```
5. **–û—Ç–∫—Ä–æ–π PNG-—Å—Ö–µ–º—É:**
   - ‚úÖ –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è üîµ –≥–æ–ª—É–±—ã–µ –ø–ª–∏—Ç—ã
   - ‚úÖ –í –¥–µ—Ç–∞–ª—å–Ω–æ–º –ø–ª–∞–Ω–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–µ–∫—Ü–∏—è "üî∏ –í—Ç–æ—Ä–∏—á–Ω—ã–µ —Ä–µ–∑—ã"
   - ‚úÖ –î–ª–∏–Ω–∞ –¥–æ—Ä–æ–∂–∫–∏ –¥–æ–ª–∂–Ω–∞ —É–≤–µ–ª–∏—á–∏—Ç—å—Å—è

---

## üìÇ **–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

- `optimization.py` ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞ –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö —Ä–µ–∑–æ–≤ + –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞
- `SECONDARY_CUTS_FIX.md` ‚Äî —ç—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üéâ **–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!**

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä—å! üöÄ

